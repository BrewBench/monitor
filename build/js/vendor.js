!function(t){"use strict";function i(t,i){var e=(65535&t)+(65535&i);return(t>>16)+(i>>16)+(e>>16)<<16|65535&e}function e(t,i){return t<<i|t>>>32-i}function n(t,n,s,o,r,a){return i(e(i(i(n,t),i(o,a)),r),s)}function s(t,i,e,s,o,r,a){return n(i&e|~i&s,t,i,o,r,a)}function o(t,i,e,s,o,r,a){return n(i&s|e&~s,t,i,o,r,a)}function r(t,i,e,s,o,r,a){return n(i^e^s,t,i,o,r,a)}function a(t,i,e,s,o,r,a){return n(e^(i|~s),t,i,o,r,a)}function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var n,l,h,u,c,p=1732584193,d=-271733879,f=-1732584194,g=271733878;for(n=0;n<t.length;n+=16)l=p,h=d,u=f,c=g,p=s(p,d,f,g,t[n],7,-680876936),g=s(g,p,d,f,t[n+1],12,-389564586),f=s(f,g,p,d,t[n+2],17,606105819),d=s(d,f,g,p,t[n+3],22,-1044525330),p=s(p,d,f,g,t[n+4],7,-176418897),g=s(g,p,d,f,t[n+5],12,1200080426),f=s(f,g,p,d,t[n+6],17,-1473231341),d=s(d,f,g,p,t[n+7],22,-45705983),p=s(p,d,f,g,t[n+8],7,1770035416),g=s(g,p,d,f,t[n+9],12,-1958414417),f=s(f,g,p,d,t[n+10],17,-42063),d=s(d,f,g,p,t[n+11],22,-1990404162),p=s(p,d,f,g,t[n+12],7,1804603682),g=s(g,p,d,f,t[n+13],12,-40341101),f=s(f,g,p,d,t[n+14],17,-1502002290),d=s(d,f,g,p,t[n+15],22,1236535329),p=o(p,d,f,g,t[n+1],5,-165796510),g=o(g,p,d,f,t[n+6],9,-1069501632),f=o(f,g,p,d,t[n+11],14,643717713),d=o(d,f,g,p,t[n],20,-373897302),p=o(p,d,f,g,t[n+5],5,-701558691),g=o(g,p,d,f,t[n+10],9,38016083),f=o(f,g,p,d,t[n+15],14,-660478335),d=o(d,f,g,p,t[n+4],20,-405537848),p=o(p,d,f,g,t[n+9],5,568446438),g=o(g,p,d,f,t[n+14],9,-1019803690),f=o(f,g,p,d,t[n+3],14,-187363961),d=o(d,f,g,p,t[n+8],20,1163531501),p=o(p,d,f,g,t[n+13],5,-1444681467),g=o(g,p,d,f,t[n+2],9,-51403784),f=o(f,g,p,d,t[n+7],14,1735328473),d=o(d,f,g,p,t[n+12],20,-1926607734),p=r(p,d,f,g,t[n+5],4,-378558),g=r(g,p,d,f,t[n+8],11,-2022574463),f=r(f,g,p,d,t[n+11],16,1839030562),d=r(d,f,g,p,t[n+14],23,-35309556),p=r(p,d,f,g,t[n+1],4,-1530992060),g=r(g,p,d,f,t[n+4],11,1272893353),f=r(f,g,p,d,t[n+7],16,-155497632),d=r(d,f,g,p,t[n+10],23,-1094730640),p=r(p,d,f,g,t[n+13],4,681279174),g=r(g,p,d,f,t[n],11,-358537222),f=r(f,g,p,d,t[n+3],16,-722521979),d=r(d,f,g,p,t[n+6],23,76029189),p=r(p,d,f,g,t[n+9],4,-640364487),g=r(g,p,d,f,t[n+12],11,-421815835),f=r(f,g,p,d,t[n+15],16,530742520),d=r(d,f,g,p,t[n+2],23,-995338651),p=a(p,d,f,g,t[n],6,-198630844),g=a(g,p,d,f,t[n+7],10,1126891415),f=a(f,g,p,d,t[n+14],15,-1416354905),d=a(d,f,g,p,t[n+5],21,-57434055),p=a(p,d,f,g,t[n+12],6,1700485571),g=a(g,p,d,f,t[n+3],10,-1894986606),f=a(f,g,p,d,t[n+10],15,-1051523),d=a(d,f,g,p,t[n+1],21,-2054922799),p=a(p,d,f,g,t[n+8],6,1873313359),g=a(g,p,d,f,t[n+15],10,-30611744),f=a(f,g,p,d,t[n+6],15,-1560198380),d=a(d,f,g,p,t[n+13],21,1309151649),p=a(p,d,f,g,t[n+4],6,-145523070),g=a(g,p,d,f,t[n+11],10,-1120210379),f=a(f,g,p,d,t[n+2],15,718787259),d=a(d,f,g,p,t[n+9],21,-343485551),p=i(p,l),d=i(d,h),f=i(f,u),g=i(g,c);return[p,d,f,g]}function h(t){var i,e="",n=32*t.length;for(i=0;i<n;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function u(t){var i,e=[];for(e[(t.length>>2)-1]=void 0,i=0;i<e.length;i+=1)e[i]=0;var n=8*t.length;for(i=0;i<n;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function c(t){return h(l(u(t),8*t.length))}function p(t,i){var e,n,s=u(t),o=[],r=[];for(o[15]=r[15]=void 0,s.length>16&&(s=l(s,8*t.length)),e=0;e<16;e+=1)o[e]=909522486^s[e],r[e]=1549556828^s[e];return n=l(o.concat(u(i)),512+8*i.length),h(l(r.concat(n),640))}function d(t){var i,e,n="0123456789abcdef",s="";for(e=0;e<t.length;e+=1)i=t.charCodeAt(e),s+=n.charAt(i>>>4&15)+n.charAt(15&i);return s}function f(t){return unescape(encodeURIComponent(t))}function g(t){return c(f(t))}function m(t){return d(g(t))}function v(t,i){return p(f(t),f(i))}function b(t,i){return d(v(t,i))}function E(t,i,e){return i?e?v(i,t):b(i,t):e?g(t):m(t)}"function"==typeof define&&define.amd?define(function(){return E}):"object"==typeof module&&module.exports?module.exports=E:t.md5=E}(this),function(){var t={},i=function(t,i,e){this.element=t,this.value=i,this.options=e,this.inDrag=!1};i.prototype.valueToRadians=function(t,i,e,n,s){return i=i||100,s=s||0,e=e||360,n=n||0,Math.PI/180*((t-s)*(e-n)/(i-s)+n)},i.prototype.radiansToValue=function(t,i,e,n,s){return i=i||100,e=e||0,n=n||360,s=s||0,(180/Math.PI*t-s)*(i-e)/(n-s)+e},i.prototype.createArc=function(t,i,e,n,s){return d3.svg.arc().innerRadius(t).outerRadius(i).startAngle(e).endAngle(n).cornerRadius(s)},i.prototype.drawArc=function(t,i,e,n,s,o){var r=t.append("path").attr("id",e).attr("d",i).style(n).attr("transform","translate("+this.options.size/2+", "+this.options.size/2+")");return!1===this.options.readOnly&&(s&&r.on("click",s),o&&r.call(o)),r},i.prototype.createArcs=function(){var t=parseInt(this.options.size/2,10),i=this.valueToRadians(this.options.startAngle,360),e=this.valueToRadians(this.options.endAngle,360);this.options.scale.enabled&&(t-=this.options.scale.width+this.options.scale.spaceWidth);var n,s=t-this.options.trackWidth,o=t-this.options.barWidth,r=t-this.options.barWidth,a=t,l=t,h=t,u=t;this.options.barWidth>this.options.trackWidth?(n=(this.options.barWidth-this.options.trackWidth)/2,s-=n,a-=n):this.options.barWidth<this.options.trackWidth&&(n=(this.options.trackWidth-this.options.barWidth)/2,l-=n,h-=n,o-=n,r-=n),this.options.bgColor&&(this.bgArc=this.createArc(0,t,i,e)),"tron"===this.options.skin.type&&(a=a-this.options.skin.width-this.options.skin.spaceWidth,l=l-this.options.skin.width-this.options.skin.spaceWidth,h=h-this.options.skin.width-this.options.skin.spaceWidth,u=u-this.options.skin.width-this.options.skin.spaceWidth,this.hoopArc=this.createArc(t-this.options.skin.width,t,i,e)),this.trackArc=this.createArc(s,a,i,e),this.changeArc=this.createArc(o,l,i,i,this.options.barCap),this.valueArc=this.createArc(r,h,i,i,this.options.barCap),this.interactArc=this.createArc(1,u,i,e)},i.prototype.drawArcs=function(t,i){var e=d3.select(this.element).append("svg").attr("width",this.options.size).attr("height",this.options.size);if(this.options.bgColor&&this.drawArc(e,this.bgArc,"bgArc",{fill:this.options.bgColor}),this.options.displayInput){var n=.2*this.options.size+"px";"auto"!==this.options.fontSize&&(n=this.options.fontSize+"px"),this.options.step<1&&(this.value=this.value.toFixed(1));var s=this.value;"function"==typeof this.options.inputFormatter&&(s=this.options.inputFormatter(s)),e.append("text").attr("id","text").attr("text-anchor","middle").attr("font-size",n).style("fill",this.options.textColor).text(s+this.options.unit||"").attr("transform","translate("+this.options.size/2+", "+(this.options.size/2+.06*this.options.size)+")"),this.options.subText.enabled&&(n=.07*this.options.size+"px","auto"!==this.options.subText.font&&(n=this.options.subText.font+"px"),e.append("text").attr("class","sub-text").attr("text-anchor","middle").attr("font-size",n).style("fill",this.options.subText.color).text(this.options.subText.text).attr("transform","translate("+this.options.size/2+", "+(this.options.size/2+.15*this.options.size)+")"))}if(this.options.scale.enabled){var o,r,a,l=0,h=0,u=this.valueToRadians(this.options.min,this.options.max,this.options.endAngle,this.options.startAngle,this.options.min),c=this.valueToRadians(this.options.max,this.options.max,this.options.endAngle,this.options.startAngle,this.options.min),p=0;if(0===this.options.startAngle&&360===this.options.endAngle||(p=1),"dots"===this.options.scale.type){var d=this.options.scale.width;o=this.options.size/2-d,r=this.options.scale.quantity;var f=o+this.options.scale.width;a=d3.range(r).map(function(){return h=l*(c-u)-Math.PI/2+u,l+=1/(r-p),{cx:f+Math.cos(h)*o,cy:f+Math.sin(h)*o,r:d}}),e.selectAll("circle").data(a).enter().append("circle").attr({r:function(t){return t.r},cx:function(t){return t.cx},cy:function(t){return t.cy},fill:this.options.scale.color})}else if("lines"===this.options.scale.type){var g=this.options.scale.height;o=this.options.size/2,r=this.options.scale.quantity,a=d3.range(r).map(function(){return h=l*(c-u)-Math.PI/2+u,l+=1/(r-p),{x1:o+Math.cos(h)*o,y1:o+Math.sin(h)*o,x2:o+Math.cos(h)*(o-g),y2:o+Math.sin(h)*(o-g)}}),e.selectAll("line").data(a).enter().append("line").attr({x1:function(t){return t.x1},y1:function(t){return t.y1},x2:function(t){return t.x2},y2:function(t){return t.y2},"stroke-width":this.options.scale.width,stroke:this.options.scale.color})}}"tron"===this.options.skin.type&&this.drawArc(e,this.hoopArc,"hoopArc",{fill:this.options.skin.color}),this.drawArc(e,this.trackArc,"trackArc",{fill:this.options.trackColor}),this.options.displayPrevious?this.changeElem=this.drawArc(e,this.changeArc,"changeArc",{fill:this.options.prevBarColor}):this.changeElem=this.drawArc(e,this.changeArc,"changeArc",{"fill-opacity":0}),this.valueElem=this.drawArc(e,this.valueArc,"valueArc",{fill:this.options.barColor});var m="pointer";this.options.readOnly&&(m="default"),this.drawArc(e,this.interactArc,"interactArc",{"fill-opacity":0,cursor:m},t,i)},i.prototype.draw=function(t){function i(){s.inDrag=!0,n(d3.event.x-s.options.size/2,d3.event.y-s.options.size/2,!1)}function e(){s.inDrag=!1;var t=d3.mouse(this.parentNode);n(t[0]-s.options.size/2,t[1]-s.options.size/2,!0)}function n(i,e,n){var o,r,a=Math.atan(e/i)/(Math.PI/180);if(i>=0&&0>=e||i>=0&&e>=0?r=90:(r=270,s.options.startAngle<0&&(r=-90)),o=(r+a)*(Math.PI/180),s.value=s.radiansToValue(o,s.options.max,s.options.min,s.options.endAngle,s.options.startAngle),s.value>=s.options.min&&s.value<=s.options.max&&(s.value=Math.round(~~((s.value<0?-.5:.5)+s.value/s.options.step)*s.options.step*100)/100,s.options.step<1&&(s.value=s.value.toFixed(1)),t(s.value),s.valueArc.endAngle(s.valueToRadians(s.value,s.options.max,s.options.endAngle,s.options.startAngle,s.options.min)),s.valueElem.attr("d",s.valueArc),n&&(s.changeArc.endAngle(s.valueToRadians(s.value,s.options.max,s.options.endAngle,s.options.startAngle,s.options.min)),s.changeElem.attr("d",s.changeArc)),s.options.displayInput)){var l=s.value;"function"==typeof s.options.inputFormatter&&(l=s.options.inputFormatter(l)),d3.select(s.element).select("#text").text(l+s.options.unit||"")}}d3.select(this.element).select("svg").remove();var s=this;s.createArcs();var o=d3.behavior.drag().on("drag",i).on("dragend",e);s.drawArcs(e,o),s.options.animate.enabled?s.valueElem.transition().ease(s.options.animate.ease).duration(s.options.animate.duration).tween("",function(){var t=d3.interpolate(s.valueToRadians(s.options.startAngle,360),s.valueToRadians(s.value,s.options.max,s.options.endAngle,s.options.startAngle,s.options.min));return function(i){var e=t(i);s.valueElem.attr("d",s.valueArc.endAngle(e)),s.changeElem.attr("d",s.changeArc.endAngle(e))}}):(s.changeArc.endAngle(this.valueToRadians(this.value,this.options.max,this.options.endAngle,this.options.startAngle,this.options.min)),s.changeElem.attr("d",s.changeArc),s.valueArc.endAngle(this.valueToRadians(this.value,this.options.max,this.options.endAngle,this.options.startAngle,this.options.min)),s.valueElem.attr("d",s.valueArc))},i.prototype.setValue=function(t){if(!this.inDrag&&this.value>=this.options.min&&this.value<=this.options.max){var i=this.valueToRadians(t,this.options.max,this.options.endAngle,this.options.startAngle,this.options.min);if(this.value=Math.round(~~((0>t?-.5:.5)+t/this.options.step)*this.options.step*100)/100,this.options.step<1&&(this.value=this.value.toFixed(1)),this.changeArc.endAngle(i),d3.select(this.element).select("#changeArc").attr("d",this.changeArc),this.valueArc.endAngle(i),d3.select(this.element).select("#valueArc").attr("d",this.valueArc),this.options.displayInput){var e=this.value;"function"==typeof this.options.inputFormatter&&(e=this.options.inputFormatter(e)),d3.select(this.element).select("#text").text(e+this.options.unit||"")}}},t.Knob=i,t.knobDirective=function(){return{restrict:"E",scope:{value:"=",options:"="},link:function(i,e){i.value=i.value||0;var n={skin:{type:"simple",width:10,color:"rgba(255,0,0,.5)",spaceWidth:5},animate:{enabled:!0,duration:1e3,ease:"bounce"},size:200,startAngle:0,endAngle:360,unit:"",displayInput:!0,inputFormatter:function(t){return t},readOnly:!1,trackWidth:50,barWidth:50,trackColor:"rgba(0,0,0,0)",barColor:"rgba(255,0,0,.5)",prevBarColor:"rgba(0,0,0,0)",textColor:"#222",barCap:0,fontSize:"auto",subText:{enabled:!1,text:"",color:"gray",font:"auto"},bgColor:"",scale:{enabled:!1,type:"lines",color:"gray",width:4,quantity:20,height:10,spaceWidth:15},step:1,displayPrevious:!1,min:0,max:100,dynamicOptions:!1};i.options=angular.merge(n,i.options);var s=new t.Knob(e[0],i.value,i.options);if(i.$watch("value",function(t,i){null===t&&void 0===t||void 0===i||t===i||s.setValue(t)}),i.options.dynamicOptions){var o=!0;i.$watch("options",function(){if(o)o=!1;else{var a=angular.merge(n,i.options);s=new t.Knob(e[0],i.value,a),r()}},!0)}var r=function(){s.draw(function(t){i.$apply(function(){i.value=t})})};r()}}},angular.module("ui.knob",[]).directive("uiKnob",t.knobDirective)}(),function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.X2JS=i()}(this,function(){return function(t){function i(t){var i=t.localName;return null==i&&(i=t.baseName),null!=i&&""!=i||(i=t.nodeName),i}function e(t){return t.prefix}function n(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}function s(t,i,e,n){for(var s=0;s<t.length;s++){var o=t[s];if("string"==typeof o){if(o==n)break}else if(o instanceof RegExp){if(o.test(n))break}else if("function"==typeof o&&o(i,e,n))break}return s!=t.length}function o(i,e,n){switch(t.arrayAccessForm){case"property":i[e]instanceof Array?i[e+"_asArray"]=i[e]:i[e+"_asArray"]=[i[e]]}!(i[e]instanceof Array)&&t.arrayAccessFormPaths.length>0&&s(t.arrayAccessFormPaths,i,e,n)&&(i[e]=[i[e]])}function r(t){var i=t.split(/[-T:+Z]/g),e=new Date(i[0],i[1]-1,i[2]),n=i[5].split(".");if(e.setHours(i[3],i[4],n[0]),n.length>1&&e.setMilliseconds(n[1]),i[6]&&i[7]){var s=60*i[6]+Number(i[7]);s=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*s:s),e.setMinutes(e.getMinutes()-s-e.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())));return e}function a(i,e,n){if(t.datetimeAccessFormPaths.length>0){var o=n.split(".#")[0];return s(t.datetimeAccessFormPaths,i,e,o)?r(i):i}return i}function l(i,e,n,o){return!(e==x.ELEMENT_NODE&&t.xmlElementsFilter.length>0)||s(t.xmlElementsFilter,i,n,o)}function h(n,s){if(n.nodeType==x.DOCUMENT_NODE){for(var r=new Object,u=n.childNodes,c=0;c<u.length;c++){var p=u.item(c);if(p.nodeType==x.ELEMENT_NODE){var d=i(p);r[d]=h(p,d)}}return r}if(n.nodeType==x.ELEMENT_NODE){var r=new Object;r.__cnt=0;for(var u=n.childNodes,c=0;c<u.length;c++){var p=u.item(c),d=i(p);if(p.nodeType!=x.COMMENT_NODE){var f=s+"."+d;l(r,p.nodeType,d,f)&&(r.__cnt++,null==r[d]?(r[d]=h(p,f),o(r,d,f)):(null!=r[d]&&(r[d]instanceof Array||(r[d]=[r[d]],o(r,d,f))),r[d][r[d].length]=h(p,f)))}}for(var g=0;g<n.attributes.length;g++){var m=n.attributes.item(g);r.__cnt++,r[t.attributePrefix+m.name]=m.value}var v=e(n);return null!=v&&""!=v&&(r.__cnt++,r.__prefix=v),null!=r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),t.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"==t.arrayAccessForm&&delete r["#text_asArray"],r.__text=a(r.__text,d,s+"."+d)),null!=r["#cdata-section"]&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"==t.arrayAccessForm&&delete r["#cdata-section_asArray"]),0==r.__cnt&&"text"==t.emptyNodeForm?r="":1==r.__cnt&&null!=r.__text?r=r.__text:1!=r.__cnt||null==r.__cdata||t.keepCData?r.__cnt>1&&null!=r.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==r.__text||""==r.__text.trim())&&delete r.__text:r=r.__cdata,delete r.__cnt,!t.enableToStringFunc||null==r.__text&&null==r.__cdata||(r.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),r}if(n.nodeType==x.TEXT_NODE||n.nodeType==x.CDATA_SECTION_NODE)return n.nodeValue}function u(i,e,s,o){var r="<"+(null!=i&&null!=i.__prefix?i.__prefix+":":"")+e;if(null!=s)for(var a=0;a<s.length;a++){var l=s[a],h=i[l];t.escapeMode&&(h=n(h)),r+=" "+l.substr(t.attributePrefix.length)+"=",t.useDoubleQuotes?r+='"'+h+'"':r+="'"+h+"'"}return r+=o?"/>":">"}function c(t,i){return"</"+(null!=t.__prefix?t.__prefix+":":"")+i+">"}function p(t,i){return-1!==t.indexOf(i,t.length-i.length)}function d(i,e){return!!("property"==t.arrayAccessForm&&p(e.toString(),"_asArray")||0==e.toString().indexOf(t.attributePrefix)||0==e.toString().indexOf("__")||i[e]instanceof Function)}function f(t){var i=0;if(t instanceof Object)for(var e in t)d(t,e)||i++;return i}function g(i,e,n){return 0==t.jsonPropertiesFilter.length||""==n||s(t.jsonPropertiesFilter,i,e,n)}function m(i){var e=[];if(i instanceof Object)for(var n in i)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(t.attributePrefix)&&e.push(n);return e}function v(i){var e="";return null!=i.__cdata&&(e+="<![CDATA["+i.__cdata+"]]>"),null!=i.__text&&(t.escapeMode?e+=n(i.__text):e+=i.__text),e}function b(i){var e="";return i instanceof Object?e+=v(i):null!=i&&(t.escapeMode?e+=n(i):e+=i),e}function E(t,i){return""===t?i:t+"."+i}function T(t,i,e,n){var s="";if(0==t.length)s+=u(t,i,e,!0);else for(var o=0;o<t.length;o++)s+=u(t[o],i,m(t[o]),!1),s+=L(t[o],E(n,i)),s+=c(t[o],i);return s}function L(t,i){var e="";if(f(t)>0)for(var n in t)if(!d(t,n)&&(""==i||g(t,n,E(i,n)))){var s=t[n],o=m(s);if(null==s||void 0==s)e+=u(s,n,o,!0);else if(s instanceof Object)if(s instanceof Array)e+=T(s,n,o,i);else if(s instanceof Date)e+=u(s,n,o,!1),e+=s.toISOString(),e+=c(s,n);else{var r=f(s);r>0||null!=s.__text||null!=s.__cdata?(e+=u(s,n,o,!1),e+=L(s,E(i,n)),e+=c(s,n)):e+=u(s,n,o,!0)}else e+=u(s,n,o,!1),e+=b(s),e+=c(s,n)}return e+=b(t)}t=t||{},function(){void 0===t.escapeMode&&(t.escapeMode=!0),t.attributePrefix=t.attributePrefix||"_",t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1),t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1)}();var x={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(t){var i=window.ActiveXObject||"ActiveXObject"in window;if(void 0===t)return null;var e;if(window.DOMParser){var n=new window.DOMParser,s=null;if(!i)try{s=n.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(t){s=null}try{e=n.parseFromString(t,"text/xml"),null!=s&&e.getElementsByTagNameNS(s,"parsererror").length>0&&(e=null)}catch(t){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?r(t):t},this.xml2json=function(t){return h(t)},this.xml_str2json=function(t){var i=this.parseXmlString(t);return null!=i?this.xml2json(i):null},this.json2xml_str=function(t){return L(t,"")},this.json2xml=function(t){var i=this.json2xml_str(t);return this.parseXmlString(i)},this.getVersion=function(){return"1.2.0"}}}),function t(i,e,n){function s(r,a){if(!e[r]){if(!i[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=e[r]={exports:{}};i[r][0].call(u.exports,function(t){var e=i[r][1][t];return s(e||t)},u,u.exports,t,i,e,n)}return e[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,i,e){var n,s,o;o=t("./Utils"),s=t("./Inline"),n=function(){function t(){}return t.indentation=4,t.prototype.dump=function(t,i,e,n,r){var a,l,h,u,c,p,d;if(null==i&&(i=0),null==e&&(e=0),null==n&&(n=!1),null==r&&(r=null),u="",c=e?o.strRepeat(" ",e):"",i<=0||"object"!=typeof t||t instanceof Date||o.isEmpty(t))u+=c+s.dump(t,n,r);else if(t instanceof Array)for(a=0,h=t.length;a<h;a++)p=t[a],d=i-1<=0||"object"!=typeof p||o.isEmpty(p),u+=c+"-"+(d?" ":"\n")+this.dump(p,i-1,d?0:e+this.indentation,n,r)+(d?"\n":"");else for(l in t)p=t[l],d=i-1<=0||"object"!=typeof p||o.isEmpty(p),u+=c+s.dump(l,n,r)+":"+(d?" ":"\n")+this.dump(p,i-1,d?0:e+this.indentation,n,r)+(d?"\n":"");return u},t}(),i.exports=n},{"./Inline":6,"./Utils":10}],2:[function(t,i,e){var n,s;s=t("./Pattern"),n=function(){function t(){}var i;return t.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(i=String.fromCharCode)(133),i(160),i(8232),i(8233)],t.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],t.MAPPING_ESCAPEES_TO_ESCAPED=function(){var i,e,n,s;for(n={},i=e=0,s=t.LIST_ESCAPEES.length;0<=s?e<s:e>s;i=0<=s?++e:--e)n[t.LIST_ESCAPEES[i]]=t.LIST_ESCAPED[i];return n}(),t.PATTERN_CHARACTERS_TO_ESCAPE=new s("[\\x00-\\x1f]|Â|Â |â¨|â©"),t.PATTERN_MAPPING_ESCAPEES=new s(t.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),t.PATTERN_SINGLE_QUOTING=new s("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),t.requiresDoubleQuoting=function(t){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(t)},t.escapeWithDoubleQuotes=function(t){return'"'+this.PATTERN_MAPPING_ESCAPEES.replace(t,function(t){return function(i){return t.MAPPING_ESCAPEES_TO_ESCAPED[i]}}(this))+'"'},t.requiresSingleQuoting=function(t){return this.PATTERN_SINGLE_QUOTING.test(t)},t.escapeWithSingleQuotes=function(t){return"'"+t.replace(/'/g,"''")+"'"},t}(),i.exports=n},{"./Pattern":8}],3:[function(t,i,e){var n,s=function(t,i){function e(){this.constructor=t}for(var n in i)o.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},o={}.hasOwnProperty;n=function(t){function i(t,i,e){this.message=t,this.parsedLine=i,this.snippet=e}return s(i,t),i.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<DumpException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<DumpException> "+this.message},i}(Error),i.exports=n},{}],4:[function(t,i,e){var n,s=function(t,i){function e(){this.constructor=t}for(var n in i)o.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},o={}.hasOwnProperty;n=function(t){function i(t,i,e){this.message=t,this.parsedLine=i,this.snippet=e}return s(i,t),i.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message},i}(Error),i.exports=n},{}],5:[function(t,i,e){var n,s=function(t,i){function e(){this.constructor=t}for(var n in i)o.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t},o={}.hasOwnProperty;n=function(t){function i(t,i,e){this.message=t,this.parsedLine=i,this.snippet=e}return s(i,t),i.prototype.toString=function(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message},i}(Error),i.exports=n},{}],6:[function(t,i,e){var n,s,o,r,a,l,h,u=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1};a=t("./Pattern"),l=t("./Unescaper"),n=t("./Escaper"),h=t("./Utils"),o=t("./Exception/ParseException"),r=t("./Exception/ParseMore"),t("./Exception/DumpException"),s=function(){function t(){}return t.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",t.PATTERN_TRAILING_COMMENTS=new a("^\\s*#.*$"),t.PATTERN_QUOTED_SCALAR=new a("^"+t.REGEX_QUOTED_STRING),t.PATTERN_THOUSAND_NUMERIC_SCALAR=new a("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),t.PATTERN_SCALAR_BY_DELIMITERS={},t.settings={},t.configure=function(t,i){null==t&&(t=null),null==i&&(i=null),this.settings.exceptionOnInvalidType=t,this.settings.objectDecoder=i},t.parse=function(t,i,e){var n,s;if(null==i&&(i=!1),null==e&&(e=null),this.settings.exceptionOnInvalidType=i,this.settings.objectDecoder=e,null==t)return"";if(t=h.trim(t),0===t.length)return"";switch(n={exceptionOnInvalidType:i,objectDecoder:e,i:0},t.charAt(0)){case"[":s=this.parseSequence(t,n),++n.i;break;case"{":s=this.parseMapping(t,n),++n.i;break;default:s=this.parseScalar(t,null,['"',"'"],n)}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(t.slice(n.i),""))throw new o('Unexpected characters near "'+t.slice(n.i)+'".');return s},t.dump=function(t,i,e){var s,o,r;return null==i&&(i=!1),null==e&&(e=null),null==t?"null":(r=typeof t,"object"===r?t instanceof Date?t.toISOString():null==e||"string"!=typeof(o=e(t))&&null==o?this.dumpObject(t):o:"boolean"===r?t?"true":"false":h.isDigits(t)?"string"===r?"'"+t+"'":String(parseInt(t)):h.isNumeric(t)?"string"===r?"'"+t+"'":String(parseFloat(t)):"number"===r?t===1/0?".Inf":t===-1/0?"-.Inf":isNaN(t)?".NaN":t:n.requiresDoubleQuoting(t)?n.escapeWithDoubleQuotes(t):n.requiresSingleQuoting(t)?n.escapeWithSingleQuotes(t):""===t?'""':h.PATTERN_DATE.test(t)?"'"+t+"'":"null"===(s=t.toLowerCase())||"~"===s||"true"===s||"false"===s?"'"+t+"'":t)},t.dumpObject=function(t,i,e){var n,s,o,r,a;if(null==e&&(e=null),t instanceof Array){for(r=[],n=0,o=t.length;n<o;n++)a=t[n],r.push(this.dump(a));return"["+r.join(", ")+"]"}r=[];for(s in t)a=t[s],r.push(this.dump(s)+": "+this.dump(a));return"{"+r.join(", ")+"}"},t.parseScalar=function(t,i,e,n,s){var r,l,c,p,d,f,g,m,v;if(null==i&&(i=null),null==e&&(e=['"',"'"]),null==n&&(n=null),null==s&&(s=!0),null==n&&(n={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),r=n.i,f=t.charAt(r),u.call(e,f)>=0){if(p=this.parseQuotedScalar(t,n),r=n.i,null!=i&&(v=h.ltrim(t.slice(r)," "),g=v.charAt(0),!(u.call(i,g)>=0)))throw new o("Unexpected characters ("+t.slice(r)+").")}else{if(i){if(l=i.join("|"),d=this.PATTERN_SCALAR_BY_DELIMITERS[l],null==d&&(d=new a("^(.+?)("+l+")"),this.PATTERN_SCALAR_BY_DELIMITERS[l]=d),!(c=d.exec(t.slice(r))))throw new o("Malformed inline YAML string ("+t+").");p=c[1],r+=p.length}else p=t.slice(r),r+=p.length,-1!==(m=p.indexOf(" #"))&&(p=h.rtrim(p.slice(0,m)));s&&(p=this.evaluateScalar(p,n))}return n.i=r,p},t.parseQuotedScalar=function(t,i){var e,n,s;if(e=i.i,!(n=this.PATTERN_QUOTED_SCALAR.exec(t.slice(e))))throw new r("Malformed inline YAML string ("+t.slice(e)+").");return s=n[0].substr(1,n[0].length-2),s='"'===t.charAt(e)?l.unescapeDoubleQuotedString(s):l.unescapeSingleQuotedString(s),e+=n[0].length,i.i=e,s},t.parseSequence=function(t,i){var e,n,s,o,a,l;for(o=[],s=t.length,e=i.i,e+=1;e<s;){switch(i.i=e,t.charAt(e)){case"[":o.push(this.parseSequence(t,i)),e=i.i;break;case"{":o.push(this.parseMapping(t,i)),e=i.i;break;case"]":return o;case",":case" ":case"\n":break;default:if(n='"'===(a=t.charAt(e))||"'"===a,l=this.parseScalar(t,[",","]"],['"',"'"],i),e=i.i,!n&&"string"==typeof l&&(-1!==l.indexOf(": ")||-1!==l.indexOf(":\n")))try{l=this.parseMapping("{"+l+"}")}catch(t){t}o.push(l),--e}++e}throw new r("Malformed inline YAML string "+t)},t.parseMapping=function(t,i){var e,n,s,o,a,l,h;for(a={},o=t.length,n=i.i,n+=1,l=!1;n<o;){switch(i.i=n,t.charAt(n)){case" ":case",":case"\n":++n,i.i=n,l=!0;break;case"}":return a}if(l)l=!1;else for(s=this.parseScalar(t,[":"," ","\n"],['"',"'"],i,!1),n=i.i,e=!1;n<o;){switch(i.i=n,t.charAt(n)){case"[":h=this.parseSequence(t,i),n=i.i,void 0===a[s]&&(a[s]=h),e=!0;break;case"{":h=this.parseMapping(t,i),n=i.i,void 0===a[s]&&(a[s]=h),e=!0;break;case":":case" ":case"\n":break;default:h=this.parseScalar(t,[",","}"],['"',"'"],i),n=i.i,void 0===a[s]&&(a[s]=h),e=!0,--n}if(++n,e)break}}throw new r("Malformed inline YAML string "+t)},t.evaluateScalar=function(t,i){var e,n,s,r,a,l,u,c,p;switch(t=h.trim(t),u=t.toLowerCase()){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":return 1/0;case".nan":return NaN;case"-.inf":return 1/0;default:switch(u.charAt(0)){case"!":switch(r=t.indexOf(" "),-1===r?u:u.slice(0,r)){case"!":return-1!==r?parseInt(this.parseScalar(t.slice(2))):null;case"!str":return h.ltrim(t.slice(4));case"!!str":return h.ltrim(t.slice(5));case"!!int":return parseInt(this.parseScalar(t.slice(5)));case"!!bool":return h.parseBoolean(this.parseScalar(t.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(t.slice(7)));case"!!timestamp":return h.stringToDate(h.ltrim(t.slice(11)));default:if(null==i&&(i={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),a=i.objectDecoder,s=i.exceptionOnInvalidType,a)return p=h.rtrim(t),r=p.indexOf(" "),-1===r?a(p,null):(c=h.ltrim(p.slice(r+1)),c.length>0||(c=null),a(p.slice(0,r),c));if(s)throw new o("Custom object support when parsing a YAML file has been disabled.");return null}break;case"0":return"0x"===t.slice(0,2)?h.hexDec(t):h.isDigits(t)?h.octDec(t):h.isNumeric(t)?parseFloat(t):t;case"+":return h.isDigits(t)?(l=t,e=parseInt(l),l===String(e)?e:l):h.isNumeric(t)?parseFloat(t):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(t)?parseFloat(t.replace(",","")):t;case"-":return h.isDigits(t.slice(1))?"0"===t.charAt(1)?-h.octDec(t.slice(1)):(l=t.slice(1),e=parseInt(l),l===String(e)?-e:-l):h.isNumeric(t)?parseFloat(t):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(t)?parseFloat(t.replace(",","")):t;default:return(n=h.stringToDate(t))?n:h.isNumeric(t)?parseFloat(t):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(t)?parseFloat(t.replace(",","")):t}}},t}(),i.exports=s},{"./Escaper":2,"./Exception/DumpException":3,"./Exception/ParseException":4,"./Exception/ParseMore":5,"./Pattern":8,"./Unescaper":9,"./Utils":10}],7:[function(t,i,e){var n,s,o,r,a,l;n=t("./Inline"),a=t("./Pattern"),l=t("./Utils"),s=t("./Exception/ParseException"),o=t("./Exception/ParseMore"),r=function(){function t(t){this.offset=null!=t?t:0,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}return t.prototype.PATTERN_FOLDED_SCALAR_ALL=new a("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_FOLDED_SCALAR_END=new a("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),t.prototype.PATTERN_SEQUENCE_ITEM=new a("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),t.prototype.PATTERN_ANCHOR_VALUE=new a("^&(?<ref>[^ ]+) *(?<value>.*)"),t.prototype.PATTERN_COMPACT_NOTATION=new a("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_MAPPING_ITEM=new a("^(?<key>"+n.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),t.prototype.PATTERN_DECIMAL=new a("\\d+"),t.prototype.PATTERN_INDENT_SPACES=new a("^ +"),t.prototype.PATTERN_TRAILING_LINES=new a("(\n*)$"),t.prototype.PATTERN_YAML_HEADER=new a("^\\%YAML[: ][\\d\\.]+.*\n","m"),t.prototype.PATTERN_LEADING_COMMENTS=new a("^(\\#.*?\n)+","m"),t.prototype.PATTERN_DOCUMENT_MARKER_START=new a("^\\-\\-\\-.*?\n","m"),t.prototype.PATTERN_DOCUMENT_MARKER_END=new a("^\\.\\.\\.\\s*$","m"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},t.prototype.CONTEXT_NONE=0,t.prototype.CONTEXT_SEQUENCE=1,t.prototype.CONTEXT_MAPPING=2,t.prototype.parse=function(i,e,o){
var r,a,h,u,c,p,d,f,g,m,v,b,E,T,L,x,A,y,w,S,_,P,C,R,N,V,H,D,k,M,z,O,I,B,F,U;for(null==e&&(e=!1),null==o&&(o=null),this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(i).split("\n"),p=null,c=this.CONTEXT_NONE,a=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new s("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(v=R=!1,U=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===c)throw new s("You cannot define a sequence item when in a mapping");c=this.CONTEXT_SEQUENCE,null==p&&(p=[]),null!=U.value&&(C=this.PATTERN_ANCHOR_VALUE.exec(U.value))&&(v=C.ref,U.value=C.value),null==U.value||""===l.trim(U.value," ")||0===l.ltrim(U.value," ").indexOf("#")?this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(u=this.getRealCurrentLineNb()+1,k=new t(u),k.refs=this.refs,p.push(k.parse(this.getNextEmbedBlock(null,!0),e,o))):p.push(null):(null!=(M=U.leadspaces)?M.length:void 0)&&(C=this.PATTERN_COMPACT_NOTATION.exec(U.value))?(u=this.getRealCurrentLineNb(),k=new t(u),k.refs=this.refs,h=U.value,m=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(h+="\n"+this.getNextEmbedBlock(m+U.leadspaces.length+1,!0)),p.push(k.parse(h,e,o))):p.push(this.parseValue(U.value,e,o))}else{if(!(U=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))||-1!==U.key.indexOf(" #")){if(1===(_=this.lines.length)||2===_&&l.isEmpty(this.lines[1])){try{i=n.parse(this.lines[0],e,o)}catch(t){throw d=t,d.parsedLine=this.getRealCurrentLineNb()+1,d.snippet=this.currentLine,d}if("object"==typeof i){if(i instanceof Array)f=i[0];else for(T in i){f=i[T];break}if("string"==typeof f&&0===f.indexOf("*")){for(p=[],N=0,S=i.length;N<S;N++)r=i[N],p.push(this.refs[r.slice(1)]);i=p}}return i}if("["===(O=l.ltrim(i).charAt(0))||"{"===O)try{return n.parse(i,e,o)}catch(t){throw d=t,d.parsedLine=this.getRealCurrentLineNb()+1,d.snippet=this.currentLine,d}throw new s("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.CONTEXT_SEQUENCE===c)throw new s("You cannot define a mapping item when in a sequence");c=this.CONTEXT_MAPPING,null==p&&(p={}),n.configure(e,o);try{T=n.parseScalar(U.key)}catch(t){throw d=t,d.parsedLine=this.getRealCurrentLineNb()+1,d.snippet=this.currentLine,d}if("<<"===T)if(R=!0,a=!0,0===(null!=(z=U.value)?z.indexOf("*"):void 0)){if(I=U.value.slice(1),null==this.refs[I])throw new s('Reference "'+I+'" does not exist.',this.getRealCurrentLineNb()+1,this.currentLine);if("object"!=typeof(B=this.refs[I]))throw new s("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(B instanceof Array)for(g=b=0,A=B.length;b<A;g=++b)i=B[g],null==p[V=String(g)]&&(p[V]=i);else for(T in B)i=B[T],null==p[T]&&(p[T]=i)}else{if(i=null!=U.value&&""!==U.value?U.value:this.getNextEmbedBlock(),u=this.getRealCurrentLineNb()+1,k=new t(u),k.refs=this.refs,"object"!=typeof(H=k.parse(i,e)))throw new s("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(H instanceof Array)for(L=0,y=H.length;L<y;L++){if("object"!=typeof(D=H[L]))throw new s("Merge items must be objects.",this.getRealCurrentLineNb()+1,D);if(D instanceof Array)for(g=P=0,w=D.length;P<w;g=++P)i=D[g],E=String(g),p.hasOwnProperty(E)||(p[E]=i);else for(T in D)i=D[T],p.hasOwnProperty(T)||(p[T]=i)}else for(T in H)i=H[T],p.hasOwnProperty(T)||(p[T]=i)}else null!=U.value&&(C=this.PATTERN_ANCHOR_VALUE.exec(U.value))&&(v=C.ref,U.value=C.value);R||(null==U.value||""===l.trim(U.value," ")||0===l.ltrim(U.value," ").indexOf("#")?this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(u=this.getRealCurrentLineNb()+1,k=new t(u),k.refs=this.refs,F=k.parse(this.getNextEmbedBlock(),e,o),(a||void 0===p[T])&&(p[T]=F)):(a||void 0===p[T])&&(p[T]=null):(F=this.parseValue(U.value,e,o),(a||void 0===p[T])&&(p[T]=F)))}if(v)if(p instanceof Array)this.refs[v]=p[p.length-1];else{x=null;for(T in p)x=T;this.refs[v]=p[x]}}return l.isEmpty(p)?null:p},t.prototype.getRealCurrentLineNb=function(){return this.currentLineNb+this.offset},t.prototype.getCurrentLineIndentation=function(){return this.currentLine.length-l.ltrim(this.currentLine," ").length},t.prototype.getNextEmbedBlock=function(t,i){var e,n,o,r,a,h,u;if(null==t&&(t=null),null==i&&(i=!1),this.moveToNextLine(),null==t){if(r=this.getCurrentLineIndentation(),u=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===r&&!u)throw new s("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}else r=t;for(e=[this.currentLine.slice(r)],i||(o=this.isStringUnIndentedCollectionItem(this.currentLine)),h=this.PATTERN_FOLDED_SCALAR_END,a=!h.test(this.currentLine);this.moveToNextLine();)if(n=this.getCurrentLineIndentation(),n===r&&(a=!h.test(this.currentLine)),!a||!this.isCurrentLineComment())if(this.isCurrentLineBlank())e.push(this.currentLine.slice(r));else{if(o&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&n===r){this.moveToPreviousLine();break}if(n>=r)e.push(this.currentLine.slice(r));else if("#"!==l.ltrim(this.currentLine).charAt(0)){if(0===n){this.moveToPreviousLine();break}throw new s("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}}return e.join("\n")},t.prototype.moveToNextLine=function(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)},t.prototype.moveToPreviousLine=function(){this.currentLine=this.lines[--this.currentLineNb]},t.prototype.parseValue=function(t,i,e){var r,a,h,u,c,p,d,f;if(0===t.indexOf("*")){if(c=t.indexOf("#"),t=-1!==c?t.substr(1,c-2):t.slice(1),void 0===this.refs[t])throw new s('Reference "'+t+'" does not exist.',this.currentLine);return this.refs[t]}if(h=this.PATTERN_FOLDED_SCALAR_ALL.exec(t))return u=null!=(p=h.modifiers)?p:"",a=Math.abs(parseInt(u)),isNaN(a)&&(a=0),f=this.parseFoldedScalar(h.separator,this.PATTERN_DECIMAL.replace(u,""),a),null!=h.type?(n.configure(i,e),n.parseScalar(h.type+" "+f)):f;if("["!==(d=t.charAt(0))&&"{"!==d&&'"'!==d&&"'"!==d)return this.isNextLineIndented()&&(t+="\n"+this.getNextEmbedBlock()),n.parse(t,i,e);for(;;)try{return n.parse(t,i,e)}catch(i){if(!((r=i)instanceof o&&this.moveToNextLine()))throw r.parsedLine=this.getRealCurrentLineNb()+1,r.snippet=this.currentLine,r;t+="\n"+l.trim(this.currentLine," ")}},t.prototype.parseFoldedScalar=function(i,e,n){var s,o,r,h,u,c,p,d,f,g;if(null==e&&(e=""),null==n&&(n=0),!(p=this.moveToNextLine()))return"";for(s=this.isCurrentLineBlank(),g="";p&&s;)(p=this.moveToNextLine())&&(g+="\n",s=this.isCurrentLineBlank());if(0===n&&(u=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(n=u[0].length),n>0)for(d=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[n],null==d&&(d=new a("^ {"+n+"}(.*)$"),t.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[n]=d);p&&(s||(u=d.exec(this.currentLine)));)g+=s?this.currentLine.slice(n):u[1],(p=this.moveToNextLine())&&(g+="\n",s=this.isCurrentLineBlank());else p&&(g+="\n");if(p&&this.moveToPreviousLine(),">"===i){for(c="",f=g.split("\n"),o=0,r=f.length;o<r;o++)h=f[o],0===h.length||" "===h.charAt(0)?c=l.rtrim(c," ")+h+"\n":c+=h+" ";g=c}return"+"!==e&&(g=l.rtrim(g)),""===e?g=this.PATTERN_TRAILING_LINES.replace(g,"\n"):"-"===e&&(g=this.PATTERN_TRAILING_LINES.replace(g,"")),g},t.prototype.isNextLineIndented=function(t){var i,e,n;if(null==t&&(t=!0),e=this.getCurrentLineIndentation(),i=!this.moveToNextLine(),t)for(;!i&&this.isCurrentLineEmpty();)i=!this.moveToNextLine();else for(;!i&&this.isCurrentLineBlank();)i=!this.moveToNextLine();return!i&&(n=!1,this.getCurrentLineIndentation()>e&&(n=!0),this.moveToPreviousLine(),n)},t.prototype.isCurrentLineEmpty=function(){var t;return t=l.trim(this.currentLine," "),0===t.length||"#"===t.charAt(0)},t.prototype.isCurrentLineBlank=function(){return""===l.trim(this.currentLine," ")},t.prototype.isCurrentLineComment=function(){var t;return t=l.ltrim(this.currentLine," "),"#"===t.charAt(0)},t.prototype.cleanup=function(t){var i,e,n,s,o,r,a,h,u,c,p,d,f,g;for(-1!==t.indexOf("\r")&&(t=t.split("\r\n").join("\n").split("\r").join("\n")),i=0,c=this.PATTERN_YAML_HEADER.replaceAll(t,""),t=c[0],i=c[1],this.offset+=i,p=this.PATTERN_LEADING_COMMENTS.replaceAll(t,"",1),g=p[0],i=p[1],1===i&&(this.offset+=l.subStrCount(t,"\n")-l.subStrCount(g,"\n"),t=g),d=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(t,"",1),g=d[0],i=d[1],1===i&&(this.offset+=l.subStrCount(t,"\n")-l.subStrCount(g,"\n"),t=g,t=this.PATTERN_DOCUMENT_MARKER_END.replace(t,"")),u=t.split("\n"),f=-1,s=0,r=u.length;s<r;s++)h=u[s],0!==l.trim(h," ").length&&(n=h.length-l.ltrim(h).length,(-1===f||n<f)&&(f=n));if(f>0){for(e=o=0,a=u.length;o<a;e=++o)h=u[e],u[e]=h.slice(f);t=u.join("\n")}return t},t.prototype.isNextLineUnIndentedCollection=function(t){var i,e;for(null==t&&(t=null),null==t&&(t=this.getCurrentLineIndentation()),i=this.moveToNextLine();i&&this.isCurrentLineEmpty();)i=this.moveToNextLine();return!1!==i&&(e=!1,this.getCurrentLineIndentation()===t&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(e=!0),this.moveToPreviousLine(),e)},t.prototype.isStringUnIndentedCollectionItem=function(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)},t}(),i.exports=r},{"./Exception/ParseException":4,"./Exception/ParseMore":5,"./Inline":6,"./Pattern":8,"./Utils":10}],8:[function(t,i,e){var n;n=function(){function t(t,i){var e,n,s,o,r,a,l,h,u;for(null==i&&(i=""),s="",r=t.length,a=null,n=0,o=0;o<r;){if("\\"===(e=t.charAt(o)))s+=t.slice(o,+(o+1)+1||9e9),o++;else if("("===e)if(o<r-2)if("(?:"===(h=t.slice(o,+(o+2)+1||9e9)))o+=2,s+=h;else if("(?<"===h)for(n++,o+=2,l="";o+1<r;){if(">"===(u=t.charAt(o+1))){s+="(",o++,l.length>0&&(null==a&&(a={}),a[l]=n);break}l+=u,o++}else s+=e,n++;else s+=e;else s+=e;o++}this.rawRegex=t,this.cleanedRegex=s,this.regex=new RegExp(this.cleanedRegex,"g"+i.replace("g","")),this.mapping=a}return t.prototype.regex=null,t.prototype.rawRegex=null,t.prototype.cleanedRegex=null,t.prototype.mapping=null,t.prototype.exec=function(t){var i,e,n,s;if(this.regex.lastIndex=0,null==(e=this.regex.exec(t)))return null;if(null!=this.mapping){s=this.mapping;for(n in s)i=s[n],e[n]=e[i]}return e},t.prototype.test=function(t){return this.regex.lastIndex=0,this.regex.test(t)},t.prototype.replace=function(t,i){return this.regex.lastIndex=0,t.replace(this.regex,i)},t.prototype.replaceAll=function(t,i,e){var n;for(null==e&&(e=0),this.regex.lastIndex=0,n=0;this.regex.test(t)&&(0===e||n<e);)this.regex.lastIndex=0,t=t.replace(this.regex,i),n++;return[t,n]},t}(),i.exports=n},{}],9:[function(t,i,e){var n,s,o;o=t("./Utils"),n=t("./Pattern"),s=function(){function t(){}return t.PATTERN_ESCAPED_CHARACTER=new n('\\\\([0abt\tnvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'),t.unescapeSingleQuotedString=function(t){return t.replace(/\'\'/g,"'")},t.unescapeDoubleQuotedString=function(t){return null==this._unescapeCallback&&(this._unescapeCallback=function(t){return function(i){return t.unescapeCharacter(i)}}(this)),this.PATTERN_ESCAPED_CHARACTER.replace(t,this._unescapeCallback)},t.unescapeCharacter=function(t){var i;switch(i=String.fromCharCode,t.charAt(1)){case"0":return i(0);case"a":return i(7);case"b":return i(8);case"t":case"\t":return"\t";case"n":return"\n";case"v":return i(11);case"f":return i(12);case"r":return i(13);case"e":return i(27);case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return i(133);case"_":return i(160);case"L":return i(8232);case"P":return i(8233);case"x":return o.utf8chr(o.hexDec(t.substr(2,2)));case"u":return o.utf8chr(o.hexDec(t.substr(2,4)));case"U":return o.utf8chr(o.hexDec(t.substr(2,8)));default:return""}},t}(),i.exports=s},{"./Pattern":8,"./Utils":10}],10:[function(t,i,e){var n,s,o={}.hasOwnProperty;n=t("./Pattern"),s=function(){function i(){}return i.REGEX_LEFT_TRIM_BY_CHAR={},i.REGEX_RIGHT_TRIM_BY_CHAR={},i.REGEX_SPACES=/\s+/g,i.REGEX_DIGITS=/^\d+$/,i.REGEX_OCTAL=/[^0-7]/gi,i.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,i.PATTERN_DATE=new n("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),i.LOCAL_TIMEZONE_OFFSET=60*(new Date).getTimezoneOffset()*1e3,i.trim=function(t,i){var e,n;return null==i&&(i="\\s"),e=this.REGEX_LEFT_TRIM_BY_CHAR[i],null==e&&(this.REGEX_LEFT_TRIM_BY_CHAR[i]=e=new RegExp("^"+i+i+"*")),e.lastIndex=0,n=this.REGEX_RIGHT_TRIM_BY_CHAR[i],null==n&&(this.REGEX_RIGHT_TRIM_BY_CHAR[i]=n=new RegExp(i+""+i+"*$")),n.lastIndex=0,t.replace(e,"").replace(n,"")},i.ltrim=function(t,i){var e;return null==i&&(i="\\s"),e=this.REGEX_LEFT_TRIM_BY_CHAR[i],null==e&&(this.REGEX_LEFT_TRIM_BY_CHAR[i]=e=new RegExp("^"+i+i+"*")),e.lastIndex=0,t.replace(e,"")},i.rtrim=function(t,i){var e;return null==i&&(i="\\s"),e=this.REGEX_RIGHT_TRIM_BY_CHAR[i],null==e&&(this.REGEX_RIGHT_TRIM_BY_CHAR[i]=e=new RegExp(i+""+i+"*$")),e.lastIndex=0,t.replace(e,"")},i.isEmpty=function(t){return!t||""===t||"0"===t||t instanceof Array&&0===t.length||this.isEmptyObject(t)},i.isEmptyObject=function(t){var i;return t instanceof Object&&0===function(){var e;e=[];for(i in t)o.call(t,i)&&e.push(i);return e}().length},i.subStrCount=function(t,i,e,n){var s,o,r,a,l,h;for(s=0,t=""+t,i=""+i,null!=e&&(t=t.slice(e)),null!=n&&(t=t.slice(0,n)),a=t.length,h=i.length,o=r=0,l=a;0<=l?r<l:r>l;o=0<=l?++r:--r)i===t.slice(o,h)&&(s++,o+=h-1);return s},i.isDigits=function(t){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(t)},i.octDec=function(t){return this.REGEX_OCTAL.lastIndex=0,parseInt((t+"").replace(this.REGEX_OCTAL,""),8)},i.hexDec=function(t){return this.REGEX_HEXADECIMAL.lastIndex=0,t=this.trim(t),"0x"===(t+"").slice(0,2)&&(t=(t+"").slice(2)),parseInt((t+"").replace(this.REGEX_HEXADECIMAL,""),16)},i.utf8chr=function(t){var i;return i=String.fromCharCode,128>(t%=2097152)?i(t):2048>t?i(192|t>>6)+i(128|63&t):65536>t?i(224|t>>12)+i(128|t>>6&63)+i(128|63&t):i(240|t>>18)+i(128|t>>12&63)+i(128|t>>6&63)+i(128|63&t)},i.parseBoolean=function(t,i){var e;return null==i&&(i=!0),"string"==typeof t?(e=t.toLowerCase(),!(!i&&"no"===e)&&("0"!==e&&("false"!==e&&""!==e))):!!t},i.isNumeric=function(t){return this.REGEX_SPACES.lastIndex=0,"number"==typeof t||"string"==typeof t&&!isNaN(t)&&""!==t.replace(this.REGEX_SPACES,"")},i.stringToDate=function(t){var i,e,n,s,o,r,a,l,h,u,c,p;if(!(null!=t?t.length:void 0))return null;if(!(o=this.PATTERN_DATE.exec(t)))return null;if(p=parseInt(o.year,10),a=parseInt(o.month,10)-1,e=parseInt(o.day,10),null==o.hour)return i=new Date(Date.UTC(p,a,e));if(s=parseInt(o.hour,10),r=parseInt(o.minute,10),l=parseInt(o.second,10),null!=o.fraction){for(n=o.fraction.slice(0,3);n.length<3;)n+="0";n=parseInt(n,10)}else n=0;return null!=o.tz&&(h=parseInt(o.tz_hour,10),u=null!=o.tz_minute?parseInt(o.tz_minute,10):0,c=6e4*(60*h+u),"-"===o.tz_sign&&(c*=-1)),i=new Date(Date.UTC(p,a,e,s,r,l,n)),c&&i.setTime(i.getTime()-c),i},i.strRepeat=function(t,i){var e,n;for(n="",e=0;e<i;)n+=t,e++;return n},i.getStringFromFile=function(i,e){var n,s,o,r,a,l,h,u;if(null==e&&(e=null),u=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)u=new XMLHttpRequest;else if(window.ActiveXObject)for(l=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],o=0,r=l.length;o<r;o++){a=l[o];try{u=new ActiveXObject(a)}catch(t){}}return null!=u?null!=e?(u.onreadystatechange=function(){if(4===u.readyState)return e(200===u.status||0===u.status?u.responseText:null)},u.open("GET",i,!0),u.send(null)):(u.open("GET",i,!1),u.send(null),200===u.status||0===u.status?u.responseText:null):(h=t,s=h("fs"),null!=e?s.readFile(i,function(t,i){return e(t?null:String(i))}):(n=s.readFileSync(i),null!=n?String(n):null))},i}(),i.exports=s},{"./Pattern":8}],11:[function(t,i,e){var n,s,o,r;s=t("./Parser"),n=t("./Dumper"),o=t("./Utils"),r=function(){function t(){}return t.parse=function(t,i,e){return null==i&&(i=!1),null==e&&(e=null),(new s).parse(t,i,e)},t.parseFile=function(t,i,e,n){var s;return null==i&&(i=null),null==e&&(e=!1),null==n&&(n=null),null!=i?o.getStringFromFile(t,function(t){return function(s){var o;o=null,null!=s&&(o=t.parse(s,e,n)),i(o)}}(this)):(s=o.getStringFromFile(t),null!=s?this.parse(s,e,n):null)},t.dump=function(t,i,e,s,o){var r;return null==i&&(i=2),null==e&&(e=4),null==s&&(s=!1),null==o&&(o=null),r=new n,r.indentation=e,r.dump(t,i,0,s,o)},t.stringify=function(t,i,e,n,s){return this.dump(t,i,e,n,s)},t.load=function(t,i,e,n){return this.parseFile(t,i,e,n)},t}(),"undefined"!=typeof window&&null!==window&&(window.YAML=r),"undefined"!=typeof window&&null!==window||(this.YAML=r),i.exports=r},{"./Dumper":1,"./Parser":7,"./Utils":10}]},{},[11]),function(t,i){"use strict";if("function"==typeof define&&define.amd)define(["angular"],i);else if("object"==typeof module&&module.exports){var e=angular||require("angular");e&&e.module||"undefined"==typeof angular||(e=angular),module.exports=i(e)}else i(t.angular)}(this,function(t){"use strict";var i=t.module("rzModule",[]).factory("RzSliderOptions",function(){var i={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,showOuterSelectionBars:!1,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},e={},n={};return n.options=function(i){t.extend(e,i)},n.getOptions=function(n){return t.extend({},i,e,n)},n}).factory("rzThrottle",["$timeout",function(t){return function(i,e,n){var s,o,r,a=Date.now||function(){return(new Date).getTime()},l=null,h=0;n=n||{};var u=function(){h=a(),l=null,r=i.apply(s,o),s=o=null};return function(){var c=a(),p=e-(c-h);return s=this,o=arguments,0>=p?(t.cancel(l),l=null,h=c,r=i.apply(s,o),s=o=null):l||!1===n.trailing||(l=t(u,p)),r}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(i,e,n,s,o,r){var a=function(t,i){this.scope=t,this.lowValue=0,this.highValue=0,this.sliderElem=i,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return a.prototype={init:function(){var i,e,s=this,o=function(){s.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",o),t.element(n).on("resize",o),this.initHasRun=!0,i=r(function(){s.onLowHandleChange()},s.options.interval),e=r(function(){s.onHighHandleChange()},s.options.interval),this.scope.$on("rzSliderForceRender",function(){s.resetLabelsValue(),i(),s.range&&e(),s.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(t,i){t!==i&&(s.applyOptions(),s.syncLowValue(),s.range&&s.syncHighValue(),s.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(t,e){s.internalChange||t!==e&&i()}),this.scope.$watch("rzSliderHigh",function(t,i){s.internalChange||t!==i&&(null!=t&&e(),(s.range&&null==t||!s.range&&null!=t)&&(s.applyOptions(),s.resetSlider()))}),this.scope.$on("$destroy",function(){s.unbindEvents(),t.element(n).off("resize",o),s.currentFocusElement=null})},findStepIndex:function(i){for(var e=0,n=0;n<this.options.stepsArray.length;n++){var s=this.options.stepsArray[n];if(s===i){e=n;break}if(t.isDate(s)){if(s.getTime()===i.getTime()){e=n;break}}else if(t.isObject(s)&&(t.isDate(s.value)&&s.value.getTime()===i.getTime()||s.value===i)){e=n;break}}return e},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(i){var e=this.options.stepsArray[i];return t.isDate(e)?e:t.isObject(e)?e.value:e},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var i;i=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=o.getOptions(i),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(t.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return String(t)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return this.options.bindIndexForStepsArray?this.getStepValue(t):t},this.getLegend=function(i){var e=this.options.stepsArray[i];return t.isObject(e)?e.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){t.forEach(this.sliderElem.children(),function(i,e){var n=t.element(i);switch(e){case 0:this.leftOutSelBar=n;break;case 1:this.rightOutSelBar=n;break;case 2:this.fullBar=n;break;case 3:this.selBar=n;break;case 4:this.minH=n;break;case 5:this.maxH=n;break;case 6:this.flrLab=n;break;case 7:this.ceilLab=n;break;case 8:this.minLab=n;break;case 9:this.maxLab=n;break;case 10:this.cmbLab=n;break;case 11:this.ticks=n}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var t=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,t||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.alwaysHide(this.leftOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.alwaysHide(this.rightOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.range&&this.options.showOuterSelectionBars&&this.fullBar.addClass("rz-transparent"),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(t,i){t.rzAlwaysHide=i,i?this.hideEl(t):this.showEl(t)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(t,i,e,n){n=void 0===n||n;var s="",o=!1,r=i.hasClass("no-label-injection");n?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(t=this.getStepValue(t)),s=String(this.customTrFn(t,this.options.id,e))):s=String(t),(void 0===i.rzsv||i.rzsv.length!==s.length||i.rzsv.length>0&&0===i.rzsd)&&(o=!0,i.rzsv=s),r||i.html(s),this.scope[e+"Label"]=s,o&&this.getDimension(i)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var t=this.getDimension(this.minH);if(this.handleHalfDim=t/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-t,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var e=this;i(function(){e.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var t=this.options.ticksArray||this.getTicksArray(),i=this.options.vertical?"translateY":"translateX",e=this;this.options.rightToLeft&&t.reverse(),this.scope.ticks=t.map(function(t){var n=e.valueToPosition(t);e.options.vertical&&(n=e.maxPos-n);var s=i+"("+Math.round(n)+"px)",o={selected:e.isTickSelected(t),style:{"-webkit-transform":s,"-moz-transform":s,"-o-transform":s,"-ms-transform":s,transform:s}};if(o.selected&&e.options.getSelectionBarColor&&(o.style["background-color"]=e.getSelectionBarColor()),!o.selected&&e.options.getTickColor&&(o.style["background-color"]=e.getTickColor(t)),e.options.ticksTooltip&&(o.tooltip=e.options.ticksTooltip(t),o.tooltipPlacement=e.options.vertical?"right":"top"),(!0===e.options.showTicksValues||t%e.options.showTicksValues==0)&&(o.value=e.getDisplayValue(t,"tick-value"),e.options.ticksValuesTooltip&&(o.valueTooltip=e.options.ticksValuesTooltip(t),o.valueTooltipPlacement=e.options.vertical?"right":"top")),e.getLegend){var r=e.getLegend(t,e.options.id);r&&(o.legend=r)}return o})}},getTicksArray:function(){var t=this.step,i=[];this.intermediateTicks&&(t=this.options.showTicks);for(var e=this.minValue;e<=this.maxValue;e+=t)i.push(e);return i},isTickSelected:function(t){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var i=this.options.showSelectionBarFromValue;if(this.lowValue>i&&t>=i&&t<=this.lowValue)return!0;if(this.lowValue<i&&i>=t&&t>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(t>=this.lowValue)return!0}else if(this.options.showSelectionBar&&t<=this.lowValue)return!0;return!!(this.range&&t>=this.lowValue&&t<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var t=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,t)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var t=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,t)},
updateHandles:function(t,i){"lowValue"===t?this.updateLowHandle(i):this.updateHighHandle(i),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(t,i){var e=this[t].rzsd,n=i-e/2+this.handleHalfDim,s=this.barDimension-e;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===t||!this.options.rightToLeft&&"maxLab"===t?Math.min(n,s):Math.min(Math.max(n,0),s):n},updateLowHandle:function(t){if(this.setPosition(this.minH,t),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",t)),this.options.getPointerColor){var i=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:i}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(t){if(this.setPosition(this.maxH,t),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",t)),this.options.getPointerColor){var i=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:i}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var t=!1,i=!1,e=this.isLabelBelowFloorLab(this.minLab),n=this.isLabelAboveCeilLab(this.minLab),s=this.isLabelAboveCeilLab(this.maxLab),o=this.isLabelBelowFloorLab(this.cmbLab),r=this.isLabelAboveCeilLab(this.cmbLab);if(e?(t=!0,this.hideEl(this.flrLab)):(t=!1,this.showEl(this.flrLab)),n?(i=!0,this.hideEl(this.ceilLab)):(i=!1,this.showEl(this.ceilLab)),this.range){var a=this.cmbLabelShown?r:s,l=this.cmbLabelShown?o:e;a?this.hideEl(this.ceilLab):i||this.showEl(this.ceilLab),l?this.hideEl(this.flrLab):t||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(t){var i=this.options.rightToLeft,e=t.rzsp,n=t.rzsd,s=this.flrLab.rzsp,o=this.flrLab.rzsd;return i?e+n>=s-2:s+o+2>=e},isLabelAboveCeilLab:function(t){var i=this.options.rightToLeft,e=t.rzsp,n=t.rzsd,s=this.ceilLab.rzsp,o=this.ceilLab.rzsd;return i?s+o+2>=e:e+n>=s-2},updateSelectionBar:function(){var t=0,i=0,e=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,n=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)i=Math.abs(this.maxH.rzsp-this.minH.rzsp),t=n;else if(null!==this.options.showSelectionBarFromValue){var s=this.options.showSelectionBarFromValue,o=this.valueToPosition(s),r=this.options.rightToLeft?this.lowValue<=s:this.lowValue>s;r?(i=this.minH.rzsp-o,t=o+this.handleHalfDim):(i=o-this.minH.rzsp,t=this.minH.rzsp+this.handleHalfDim)}else e?(i=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,t=this.minH.rzsp+this.handleHalfDim):(i=this.minH.rzsp+this.handleHalfDim,t=0);if(this.setDimension(this.selBar,i),this.setPosition(this.selBar,t),this.range&&this.options.showOuterSelectionBars&&(this.options.rightToLeft?(this.setDimension(this.rightOutSelBar,t),this.setPosition(this.rightOutSelBar,0),this.setDimension(this.leftOutSelBar,this.getDimension(this.fullBar)-(t+i)),this.setPosition(this.leftOutSelBar,t+i)):(this.setDimension(this.leftOutSelBar,t),this.setPosition(this.leftOutSelBar,0),this.setDimension(this.rightOutSelBar,this.getDimension(this.fullBar)-(t+i)),this.setPosition(this.rightOutSelBar,t+i))),this.options.getSelectionBarColor){var a=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:a}}else if(this.options.selectionBarGradient){var l=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,h=l-t>0^e,u=this.options.vertical?h?"bottom":"top":h?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+u+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(l+i+t+(h?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=l-t+(h?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(t){return"max"===t?this.options.getPointerColor(this.scope.rzSliderHigh,t):this.options.getPointerColor(this.scope.rzSliderModel,t)},getTickColor:function(t){return this.options.getTickColor(t)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var t=this.getDisplayValue(this.lowValue,"model"),i=this.getDisplayValue(this.highValue,"high"),e="";e=this.options.mergeRangeLabelsIfSame&&t===i?t:this.options.rightToLeft?i+" - "+t:t+" - "+i,this.translateFn(e,this.cmbLab,"cmb",!1);var n=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,n),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(t,i){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(t=this.getStepValue(t)),this.customTrFn(t,this.options.id,i)},roundStep:function(t,i){var e=i||this.step,n=parseFloat((t-this.minValue)/e).toPrecision(12);return n=Math.round(+n)*e,+(this.minValue+n).toFixed(this.precision)},hideEl:function(t){return t.css({visibility:"hidden"})},showEl:function(t){return t.rzAlwaysHide?t:t.css({visibility:"visible"})},setPosition:function(t,i){t.rzsp=i;var e={};return e[this.positionProperty]=Math.round(i)+"px",t.css(e),i},getDimension:function(t){var i=t[0].getBoundingClientRect();return this.options.vertical?t.rzsd=(i.bottom-i.top)*this.options.scale:t.rzsd=(i.right-i.left)*this.options.scale,t.rzsd},setDimension:function(t,i){t.rzsd=i;var e={};return e[this.dimensionProperty]=Math.round(i)+"px",t.css(e),i},sanitizeValue:function(t){return Math.min(Math.max(t,this.minValue),this.maxValue)},valueToPosition:function(t){var i=this.linearValueToPosition;this.options.customValueToPosition?i=this.options.customValueToPosition:this.options.logScale&&(i=this.logValueToPosition),t=this.sanitizeValue(t);var e=i(t,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(e=1-e),e*this.maxPos},linearValueToPosition:function(t,i,e){return(t-i)/(e-i)},logValueToPosition:function(t,i,e){return t=Math.log(t),i=Math.log(i),e=Math.log(e),(t-i)/(e-i)},positionToValue:function(t){var i=t/this.maxPos;this.options.rightToLeft&&(i=1-i);var e=this.linearPositionToValue;return this.options.customPositionToValue?e=this.options.customPositionToValue:this.options.logScale&&(e=this.logPositionToValue),e(i,this.minValue,this.maxValue)||0},linearPositionToValue:function(t,i,e){return t*(e-i)+i},logPositionToValue:function(t,i,e){i=Math.log(i),e=Math.log(e);var n=t*(e-i)+i;return Math.exp(n)},getEventAttr:function(t,i){return void 0===t.originalEvent?t[i]:t.originalEvent[i]},getEventXY:function(t,i){var e=this.options.vertical?"clientY":"clientX";if(void 0!==t[e])return t[e];var n=this.getEventAttr(t,"touches");if(void 0!==i)for(var s=0;s<n.length;s++)if(n[s].identifier===i)return n[s][e];return n[0][e]},getEventPosition:function(t,i){var e=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(t,i)+e:this.getEventXY(t,i)-e)*this.options.scale-this.handleHalfDim},getEventNames:function(t){var i={moveEvent:"",endEvent:""};return this.getEventAttr(t,"touches")?(i.moveEvent="touchmove",i.endEvent="touchend"):(i.moveEvent="mousemove",i.endEvent="mouseup"),i},getNearestHandle:function(t){if(!this.range)return this.minH;var i=this.getEventPosition(t),e=Math.abs(i-this.minH.rzsp),n=Math.abs(i-this.maxH.rzsp);return n>e?this.minH:e>n?this.maxH:this.options.rightToLeft?i>this.minH.rzsp?this.minH:this.maxH:i<this.minH.rzsp?this.minH:this.maxH},focusElement:function(t){t[0].focus()},bindEvents:function(){var i,e,n;this.options.draggableRange?(i="rzSliderDrag",e=this.onDragStart,n=this.onDragMove):(i="lowValue",e=this.onStart,n=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",t.bind(this,e,null,i)),this.selBar.on("mousedown",t.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",t.bind(this,e,null,i)),this.maxH.on("mousedown",t.bind(this,e,null,i))):(this.minH.on("mousedown",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",t.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",t.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",t.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",t.bind(this,e,null,i)),this.selBar.on("touchstart",t.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",t.bind(this,e,null,i)),this.maxH.on("touchstart",t.bind(this,e,null,i))):(this.minH.on("touchstart",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",t.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",t.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",t.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",t.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",t.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(i,n,s){var o,r,a=this.getEventNames(s);s.stopPropagation(),s.preventDefault(),this.calcViewDimensions(),i?this.tracking=n:(i=this.getNearestHandle(s),this.tracking=i===this.minH?"lowValue":"highValue"),i.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(i),o=t.bind(this,this.dragging.active?this.onDragMove:this.onMove,i),r=t.bind(this,this.onEnd,o),e.on(a.moveEvent,o),e.on(a.endEvent,r),this.endHandlerToBeRemovedOnEnd=r,this.callOnStart();var l=this.getEventAttr(s,"changedTouches");l&&(this.touchId||(this.isDragging=!0,this.touchId=l[0].identifier))},onMove:function(i,e,n){var s,o=this.getEventAttr(e,"changedTouches");if(o)for(var r=0;r<o.length;r++)if(o[r].identifier===this.touchId){s=o[r];break}if(!o||s){var a,l=this.getEventPosition(e,s?s.identifier:void 0),h=this.options.rightToLeft?this.minValue:this.maxValue,u=this.options.rightToLeft?this.maxValue:this.minValue;0>=l?a=u:l>=this.maxPos?a=h:(a=this.positionToValue(l),a=n&&t.isNumber(this.options.showTicks)?this.roundStep(a,this.options.showTicks):this.roundStep(a)),this.positionTrackingHandle(a)}},onEnd:function(t,i){var n=this.getEventAttr(i,"changedTouches");if(!n||n[0].identifier===this.touchId){this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1;var s=this.getEventNames(i);e.off(s.moveEvent,t),e.off(s.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd()}},onTickClick:function(t,i){this.onMove(t,i,!0)},onPointerFocus:function(i,e){this.tracking=e,i.one("blur",t.bind(this,this.onPointerBlur,i)),i.on("keydown",t.bind(this,this.onKeyboardEvent)),i.on("keyup",t.bind(this,this.onKeyUp)),this.firstKeyDown=!0,i.addClass("rz-active"),this.currentFocusElement={pointer:i,ref:e}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(t){t.off("keydown"),t.off("keyup"),t.removeClass("rz-active"),this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(t){var i=t+this.step,e=t-this.step,n=t+this.valueRange/10,s=t-this.valueRange/10,o={UP:i,DOWN:e,LEFT:e,RIGHT:i,PAGEUP:n,PAGEDOWN:s,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(o.LEFT=i,o.RIGHT=e,this.options.vertical&&(o.UP=e,o.DOWN=i)),o},onKeyboardEvent:function(t){var e=this[this.tracking],n=t.keyCode||t.which,s={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},o=this.getKeyActions(e),r=s[n],a=o[r];if(null!=a&&""!==this.tracking){t.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var l=this;i(function(){var t=l.roundStep(l.sanitizeValue(a));if(l.options.draggableRangeOnly){var i,e,n=l.highValue-l.lowValue;"lowValue"===l.tracking?(i=t,(e=t+n)>l.maxValue&&(e=l.maxValue,i=e-n)):(e=t,(i=t-n)<l.minValue&&(i=l.minValue,e=i+n)),l.positionTrackingBar(i,e)}else l.positionTrackingHandle(t)})}},onDragStart:function(t,i,e){var n=this.getEventPosition(e);this.dragging={active:!0,value:this.positionToValue(n),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-n:n-this.minH.rzsp,highLimit:this.options.rightToLeft?n-this.maxH.rzsp:this.maxH.rzsp-n},this.onStart(t,i,e)},getValue:function(t,i,e,n){var s=this.options.rightToLeft,o=null;return o="min"===t?e?n?s?this.minValue:this.maxValue-this.dragging.difference:s?this.maxValue-this.dragging.difference:this.minValue:s?this.positionToValue(i+this.dragging.lowLimit):this.positionToValue(i-this.dragging.lowLimit):e?n?s?this.minValue+this.dragging.difference:this.maxValue:s?this.maxValue:this.minValue+this.dragging.difference:s?this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)},onDragMove:function(t,i){var e,n,s,o,r,a,l,h,u=this.getEventPosition(i);if(this.options.rightToLeft?(s=this.dragging.lowLimit,o=this.dragging.highLimit,l=this.maxH,h=this.minH):(s=this.dragging.highLimit,o=this.dragging.lowLimit,l=this.minH,h=this.maxH),r=o>=u,a=u>=this.maxPos-s,r){if(0===l.rzsp)return;e=this.getValue("min",u,!0,!1),n=this.getValue("max",u,!0,!1)}else if(a){if(h.rzsp===this.maxPos)return;n=this.getValue("max",u,!0,!0),e=this.getValue("min",u,!0,!0)}else e=this.getValue("min",u,!1),n=this.getValue("max",u,!1);this.positionTrackingBar(e,n)},positionTrackingBar:function(t,i){null!=this.options.minLimit&&t<this.options.minLimit&&(t=this.options.minLimit,i=t+this.dragging.difference),null!=this.options.maxLimit&&i>this.options.maxLimit&&(i=this.options.maxLimit,t=i-this.dragging.difference),this.lowValue=t,this.highValue=i,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(t)),this.updateHandles("highValue",this.valueToPosition(i))},positionTrackingHandle:function(t){var i=!1;t=this.applyMinMaxLimit(t),this.range&&(this.options.pushRange?(t=this.applyPushRange(t),i=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&t>this.highValue?t=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&t<this.lowValue&&(t=this.applyMinMaxRange(this.lowValue))),t=this.applyMinMaxRange(t),"lowValue"===this.tracking&&t>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),i=!0):"highValue"===this.tracking&&t<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),i=!0))),this[this.tracking]!==t&&(this[this.tracking]=t,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(t)),this.updateAriaAttributes(),i=!0),i&&this.applyModel(!0)},applyMinMaxLimit:function(t){return null!=this.options.minLimit&&t<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&t>this.options.maxLimit?this.options.maxLimit:t},applyMinMaxRange:function(t){var i="lowValue"===this.tracking?this.highValue:this.lowValue,e=Math.abs(t-i);return null!=this.options.minRange&&e<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&e>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:t},applyPushRange:function(t){var i="lowValue"===this.tracking?this.highValue-t:t-this.lowValue,e=null!==this.options.minRange?this.options.minRange:this.options.step,n=this.options.maxRange;return e>i?("lowValue"===this.tracking?(this.highValue=Math.min(t+e,this.maxValue),t=this.highValue-e,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(t-e,this.minValue),t=this.lowValue+e,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==n&&i>n&&("lowValue"===this.tracking?(this.highValue=t+n,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=t-n,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),t},applyModel:function(t){this.internalChange=!0,this.scope.$apply(),t&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var t=this,i="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onStart(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,i)})}},callOnChange:function(){if(this.options.onChange){var t=this,i="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onChange(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,i)})}},callOnEnd:function(){if(this.options.onEnd){var t=this,i="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onEnd(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,i)})}this.scope.$emit("slideEnded")}},a}]).directive("rzslider",["RzSlider",function(t){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(t,i){return i.rzSliderTplUrl||"rzSliderTpl.html"},link:function(i,e){i.slider=new t(i,e)}}}]);return i.run(["$templateCache",function(t){t.put("rzSliderTpl.html",'<div class=rzslider><span class="rz-bar-wrapper rz-left-out-selection"><span class=rz-bar></span></span> <span class="rz-bar-wrapper rz-right-out-selection"><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),i.name});